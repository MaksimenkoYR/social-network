(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[0],[,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"h",(function(){return c})),n.d(t,"i",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return s})),n.d(t,"g",(function(){return m})),n.d(t,"e",(function(){return f})),n.d(t,"a",(function(){return d})),n.d(t,"f",(function(){return E}));var a=n(1),i=n(42),r=n.n(i).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"97f5b938-e7eb-4074-8770-937b717465c8"},withCredentials:!0}),l=function(){return r.get("auth/me").then((function(e){return e.data}))},c=function(e){return r.post("auth/login",Object(a.a)({},e)).then((function(e){return e.data}))},o=function(e){return r.delete("auth/login").then((function(e){return e.data}))},u=function(){return r.get("security/get-captcha-url").then((function(e){return e.data}))},s=function(e){return r.get("/profile/".concat(e)).then((function(e){return e.data}))},m=function(e){return r.post("profile/photo",e)},f=function(e){return r.get("/users?count=10&page=".concat(e)).then((function(e){return e.data}))},d=function(e){return r.post("/follow/".concat(e)).then((function(e){return e.data}))},E=function(e){return r.delete("/follow/".concat(e)).then((function(e){return e.data}))}},,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"SET_PROFILE",(function(){return i})),n.d(t,"setProfile",(function(){return r})),n.d(t,"defineProfile",(function(){return l})),n.d(t,"setProfilePhoto",(function(){return c}));var a=n(6),i="SET_PROFILE";function r(e){return{type:i,profile:e}}function l(e){return function(t){Object(a.d)(e).then((function(e){t(r(e))}))}}function c(e,t){return function(n){Object(a.g)(e).then((function(){return Object(a.d)(t)})).then((function(e){n(r(e))}))}}},,,,function(e,t,n){e.exports=n.p+"static/media/defaultAvatar.2582587b.svg"},,,function(e,t,n){e.exports={button:"Button_button__1V3iU"}},,function(e,t,n){"use strict";n.r(t),n.d(t,"SET_AUTHENTICATED_USER",(function(){return i})),n.d(t,"setAuthenticatedUser",(function(){return r})),n.d(t,"INITIALIZATION_FAILED",(function(){return l})),n.d(t,"initializationFailed",(function(){return c})),n.d(t,"initializeApp",(function(){return o}));var a=n(6),i="SET_AUTHENTICATED_USER";function r(e){return{type:i,user:e}}var l="INITIALIZATION_FAILED";function c(){return{type:l}}function o(){return function(e){Object(a.b)().then((function(t){0===t.resultCode?e(r(t.data)):e(c())}))}}},,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(90)},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(23),l=n.n(r),c=n(16),o=n(8),u=n(15),s=n(4),m=n(1),f=n(27),d=function(e){var t;return null===(t=e.initialization.authenticatedUser)||void 0===t?void 0:t.id},E=(n(71),function(){return i.a.createElement("div",{className:"page-loader"},i.a.createElement("p",{className:"page-loader__title"},"Social Network"),i.a.createElement("div",{className:"page-loader__loader"},i.a.createElement("div",null)))}),p=Object(o.b)((function(e){return Object(m.a)({},function(e){return{initializationComplete:e.initialization.initializationComplete,initializationFailed:e.initialization.initializationFailed}}(e))}),{initializeApp:f.initializeApp})((function(e){var t=e.noRedirect,n=void 0!==t&&t,r=e.children,l=e.initializeApp,c=e.initializationComplete,o=e.initializationFailed;return Object(a.useEffect)((function(){l()}),[]),c||o?c||o&&n?r:o?i.a.createElement(s.a,{push:!0,to:"/sign-in"}):void 0:i.a.createElement(i.a.Fragment,null,i.a.createElement(E,null))})),g=n(27),b=g.SET_AUTHENTICATED_USER,_=g.INITIALIZATION_FAILED,h={initializationComplete:!1,initializationFailed:!1,authenticatedUser:{}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return{initializationFailed:!1,initializationComplete:!0,authenticatedUser:t.user};case _:return Object(m.a)(Object(m.a)({},e),{},{initializationComplete:!1,initializationFailed:!0});default:return e}},N=n(13),O=(n(73),n(74),Object(o.b)((function(e){return{userId:d(e)}}))((function(e){return i.a.createElement("ul",{className:"main-nav"},i.a.createElement("li",{className:"main-nav__button"},i.a.createElement(u.b,{to:"/profile/".concat(e.userId)},"Profile")),i.a.createElement("li",{className:"main-nav__button"},i.a.createElement(u.b,{to:"/users"},"Users")))}))),S=n(5),j=n(44),I=n(25),L=n.n(I),U=(n(76),function(e){var t=e.big,n=e.blue,a=e.center;return i.a.createElement("div",{className:"cirkle-loader "+(t?"cirkle-loader--big ":null)+(n?"cirkle-loader--blue ":null)+(a?"cirkle-loader--center ":null)},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null))}),w=function(e){var t=e.loading,n=Object(N.a)(e,["loading"]);return i.a.createElement("button",{onClick:function(){return n.action()},className:n.className+" "+L.a.button},t?i.a.createElement(U,null):n.children)},F=function(e){var t=e.className,n=void 0===t?"":t,a=Object(N.a)(e,["className"]);return i.a.createElement("button",{className:n+" "+L.a.button},a.children)},A=(n(77),function(e){var t,n=e.type,a=void 0===n?"default":n,r=Object(N.a)(e,["type"]);return i.a.createElement("div",{className:"input "+(r.error?"input--error":"")},i.a.createElement("input",{type:a,placeholder:r.placeholder,className:"input__field",ref:r.register,name:r.name}),i.a.createElement("label",{className:"input__alert",htmlFor:r.name},null===(t=r.error)||void 0===t?void 0:t.message))}),T=(n(78),function(){return i.a.createElement("div",{className:"horizontal-loader"},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null))}),C=(n(79),function(e){return i.a.createElement("div",{className:"editing-button "+e.classes,onClick:e.OnEdit})}),P=(n(80),function(e){var t=e.url,n=e.socialNetwork;return i.a.createElement("a",{href:t},i.a.createElement("div",{className:"social-network-button social-network-button--"+n},"facebook"))}),R=(n(81),n(6)),k=function(e){var t=Object(a.useState)(null),n=Object(S.a)(t,2),r=n[0],l=n[1];Object(a.useEffect)((function(){e.signInFailed&&c()}),[e.signInFailed]),Object(a.useEffect)((function(){c()}),[]);var c=function(){Object(R.c)().then((function(e){return l(e.url)}))},o=Object(j.a)({mode:"onBlur"}),u=o.register,m=o.handleSubmit,f=o.errors;return e.signInComplete?i.a.createElement(s.a,{to:"/"}):i.a.createElement("form",{className:"sign-in-form",onSubmit:m((function(t){e.logIn(t)}))},!e.requestSent||e.signInFailed||e.signInComplete?null:i.a.createElement(T,null),i.a.createElement("h1",{className:"sign-in-form__title"},"Sign in"),i.a.createElement("p",{className:"sign-in-form__alert"},e.signInFailed?"incorect password and/or email":null),i.a.createElement("p",{className:"sign-in-form__help-info"},"Sing-in as gest usung this:",i.a.createElement("br",null),i.a.createElement("b",null,"Email:")," free@samuraijs.com",i.a.createElement("br",null),i.a.createElement("b",null,"Password:")," free"),i.a.createElement(A,{name:"email",register:u({required:"Required",minLength:{value:3,message:"Minimum 3 characters"},maxLength:{value:35,message:"Maximum 5 characters"},pattern:{value:/^\S+@\S+\.\S+$/,message:"invalid email"}}),error:f.email,placeholder:"Email"}),i.a.createElement(A,{name:"password",type:"password",register:u({required:"Required",minLength:{value:3,message:"Minimum 3 characters"},maxLength:{value:35,message:"Maximum 5 characters"}}),error:f.password,placeholder:"Password"}),i.a.createElement("img",{className:"sign-in-form__captcha",alt:"",src:r}),i.a.createElement("div",{className:"sign-in-form__captcha-refresh",onClick:c},"Refresh image"),i.a.createElement(A,{name:"captcha",register:u({required:"Required"}),placeholder:"Enter the symbols from the image"}),i.a.createElement("label",{className:"sign-in-form__checkbox"},i.a.createElement("input",{type:"checkbox",ref:u,name:"rememberMe"}),"Remember me"),i.a.createElement(F,{className:"sign-in-form__button"},"Sign in"))};var y={requestSent:!1,signInComplete:!1,signInFailed:!1},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLEAN_SIGN_IN_STATE":return y;case"SIGN_IN_REQUEST_SENT":return Object(m.a)(Object(m.a)({},e),{},{requestSent:!0});case"SING_IN_COMPLETE":return Object(m.a)(Object(m.a)({},e),{},{signInComplete:!0});case"SIGN_IN_FAILED":return Object(m.a)(Object(m.a)({},e),{},{signInFailed:!0});default:return e}},D=(n(82),n(18).SET_PROFILE),G={profileDefine:!1,profile:{}},M=n(18),q=(n(83),function(e){var t=Object(a.useState)(),n=Object(S.a)(t,2),r=n[0],l=n[1],c=Object(a.useState)(),o=Object(S.a)(c,2),u=o[0],s=o[1];return i.a.createElement("div",{className:"edit-photo-modal"},i.a.createElement("div",{className:"edit-photo-modal__content"},i.a.createElement("h3",null,"Uppload new photo"),i.a.createElement("input",{type:"file",onChange:function(e){l(e.target.files[0]);var t=new FileReader;t.readAsDataURL(e.target.files[0]),t.onload=function(){s(t.result)},s(t.result)}}),i.a.createElement("img",{className:"edit-photo-modal__img",src:u}),i.a.createElement("button",{onClick:function(){var t=new FormData;t.append("image",r),e.setProfilePhoto(t)}},"Save"),i.a.createElement("button",{className:"edit-photo-modal__close",onClick:function(){return e.setPhotoEditing(!1)}})))}),x=function(){var e=Object(a.useState)(),t=Object(S.a)(e,2);t[0],t[1];return Object(a.useEffect)((function(){}),[]),i.a.createElement("div",null)},H=Object(o.b)((function(e){return{profile:e.profile.profile,profileDefine:e.profile.profileDefine,authenticatedUserId:e.initialization.authenticatedUser.id}}),{defineProfile:M.defineProfile,setProfilePhoto:M.setProfilePhoto})((function(e){var t,r=e.profile,l=Object(N.a)(e,["profile"]),c=Object(a.useState)(null),o=Object(S.a)(c,2),u=o[0],m=o[1],f=Object(s.h)().userId;if(Object(a.useEffect)((function(){l.defineProfile(f)}),[f]),!l.profileDefine)return i.a.createElement(U,{big:!0,blue:!0,center:!0});var d=l.authenticatedUserId===+f;return console.log(Object.keys(r).length),i.a.createElement("div",{className:"profile"},i.a.createElement("div",{className:"profile__avatar-section"},i.a.createElement("div",{className:"profile__avatar-wrapper"},i.a.createElement("img",{className:"profile__avatar",src:(null===(t=r.photos)||void 0===t?void 0:t.large)||n(22),alt:"avatar",onClick:function(){return m(!0)}}),d?i.a.createElement("div",{className:"profile__edit-profile-photo",onClick:function(){return m(!0)}},"Edit Profile Photo"):null),i.a.createElement(F,{className:"profile__avatar-button"},"Setting")),i.a.createElement("div",{className:"profile__info-section"},i.a.createElement("p",{className:"profile__name"},r.fullName),i.a.createElement(x,null),i.a.createElement("div",{className:"profile__job-preferences "+(r.lookingForAJob?"profile__job-preferences--turned-off":null)}," ",i.a.createElement("h3",null,r.lookingForAJob?"Open to work":"Edit your job preferencess"),i.a.createElement("p",{className:"profile__job-preferences-discription"},r.lookingForAJobDiscription)),i.a.createElement("div",{className:"profile__about"},i.a.createElement("h3",{className:"profile__about-title"},"About me:"),i.a.createElement("p",{className:"profile__about-content"},r.aboutMe),i.a.createElement(C,{classes:"profile__editing-button"})),i.a.createElement("div",{className:"profile__contacts"},i.a.createElement("h3",{className:"profile__contacts-title"},"Contacts:"),i.a.createElement(P,{socialNetwork:"facebook"}),i.a.createElement(C,{classes:"profile__editing-button"}))),u?i.a.createElement(q,{setPhotoEditing:m,setProfilePhoto:function(e){return l.setProfilePhoto(e,f)}}):null)})),B=Object(o.b)((function(e){var t;return{authenticatedUser:e.initialization.authenticatedUser,initializationComplete:e.initialization.initializationComplete,userPhoto:null===(t=e.profile.profile.photos)||void 0===t?void 0:t.small}}),{defineProfile:M.defineProfile})((function(e){var t=Object(a.useState)(!1),r=Object(S.a)(t,2),l=r[0],c=r[1],o=Object(s.g)(),u=Object(a.useRef)(null);return Object(a.useEffect)((function(){e.defineProfile(e.authenticatedUser.id)}),[]),Object(a.useEffect)((function(){function e(e){u.current&&!u.current.contains(e.target)&&(c(!1),console.log("fff"))}return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}})),i.a.createElement(i.a.Fragment,null,e.initializationComplete?i.a.createElement("div",{ref:u,className:"sign-in-header",onClick:function(){return c(!l)}},i.a.createElement("p",null,e.authenticatedUser.login),i.a.createElement("img",{className:"sign-in-header__photo",src:e.userPhoto||n(22),alt:"avatar"}),l?i.a.createElement("div",{className:"sign-in-modal"},i.a.createElement("div",{className:"sign-in-modal__info"},i.a.createElement("img",{className:"sign-in-modal__photo",src:e.userPhoto||n(22),alt:"avatar"}),i.a.createElement("div",null,i.a.createElement("p",null,i.a.createElement("b",null,e.authenticatedUser.login)),i.a.createElement("p",null,e.authenticatedUser.email))),i.a.createElement("button",{className:"sign-in-modal__my-profile-button "},"My profile"),i.a.createElement("button",{className:"sign-in-modal__button"},"Setting"),i.a.createElement("button",{className:"sign-in-modal__button",onClick:function(){return Object(R.i)().then((function(){return window.location.reload()}))}},"Log out")):null):i.a.createElement(w,{action:function(){return o.push("/sign-in")}},"Sign in"))})),J=function(e){var t=e.children;Object(N.a)(e,["children"]);return i.a.createElement("div",{className:"main-page"},i.a.createElement("header",{className:"main-page__header"},i.a.createElement(O,null),i.a.createElement(B,null)),i.a.createElement("main",{className:"main-page__content"},t))},V=(n(84),function(){return i.a.createElement(p,{noRedirect:!0},i.a.createElement(J,null,i.a.createElement("div",{className:"home-page"},i.a.createElement("b",{className:"home-page__title"},"Social Network"))))}),Z=(n(85),function(e){return i.a.createElement("div",{className:"sign-in-page"},i.a.createElement("div",{className:"sign-in-page__form"},i.a.createElement(k,e)))}),Q=Object(o.b)((function(e){return Object(m.a)({},function(e){return{requestSent:e.signIn.requestSent,signInFailed:e.signIn.signInFailed,signInComplete:e.signIn.signInComplete}}(e))}),{logIn:function(e){return function(t){t({type:"CLEAN_SIGN_IN_STATE"}),t({type:"SIGN_IN_REQUEST_SENT"}),Object(R.h)(e).then((function(e){0===e.resultCode?t({type:"SING_IN_COMPLETE"}):t({type:"SIGN_IN_FAILED"})}))}}})((function(e){return i.a.createElement(p,{noRedirect:!0},i.a.createElement(Z,e))})),Y=function(){return i.a.createElement(p,null,i.a.createElement(J,null,i.a.createElement(H,null)))},K=n(3);function $(e){return{type:"IS_USERS_LOADING",loadingStatus:e}}function W(e){return{type:"SET_USERS",users:e}}function X(e){return{type:"SET_PAGE_NUMBER",pageNumber:e}}var ee={usersGot:!1,usersList:[],pageNumber:1,isUsersLoading:!1,inLoading:{friendshipStatuses:{}}},te=(n(86),function(e){var t,a=e.user,r=e.toggleFrienshipStatus,l=e.isFrendshipStatusLoading,c=Object(s.g)();return i.a.createElement("div",{className:"user-prewiev",onClick:function(){c.push("profile/".concat(a.id))}},i.a.createElement("div",{className:"user-prewiev__avatar"},i.a.createElement("img",{alt:"",src:(null===(t=a.photos)||void 0===t?void 0:t.small)||n(22)})),i.a.createElement("div",{className:"user-prewiev__info"},i.a.createElement("span",{className:"user-prewiev__name"},a.name)),i.a.createElement("div",null,i.a.createElement(w,{className:a.followed?"follow-button--unfollow":"follow-button--follow",loading:l,action:function(){return r(a.id,!a.followed)}},a.followed?"Unfollow":"Follow")))}),ne=(n(87),Object(o.b)((function(e){return{users:e.users.usersList,pageNumber:e.users.pageNumber,isUsersGot:e.users.usersGot,isUsersLoading:e.users.isUsersLoading,loadingFriendshipStatuses:e.users.inLoading.friendshipStatuses}}),{getUsers:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{loadUsers:!1};return function(n){t.loadUsers&&n(X(e)),n($(!0)),Object(R.e)(e).then((function(e){n(W(e.items)),n($(!1))}))}},setPageNumber:X,toggleFrienshipStatus:function(e,t){return function(n){n(function(e){return{type:"SET_FRIENDSHIP_STATUS_AS_CHANGING",userId:e}}(e)),t?Object(R.a)(e).then((function(t){0===t.resultCode&&n(function(e){return{type:"ADD_USER_TO_FRIENDS",userId:e}}(e))})):Object(R.f)(e).then((function(t){0===t.resultCode&&n(function(e){return{type:"REMOVE_USER_FROM_FRIENDS",userId:e}}(e))}))}}})((function(e){var t=e.getUsers,n=e.pageNumber,r=e.isUsersLoading,l=e.isUsersGot,c=Object(N.a)(e,["getUsers","pageNumber","isUsersLoading","isUsersGot"]);return Object(a.useEffect)((function(){function e(){document.documentElement.scrollHeight-(document.documentElement.clientHeight+window.pageYOffset)<400&&(r||t(++n,{loadUsers:!0}))}return document.addEventListener("scroll",e),function(){return document.removeEventListener("scroll",e)}}),[t,r,n]),Object(a.useEffect)((function(){t(n)}),[]),l?i.a.createElement(i.a.Fragment,null,i.a.createElement("ul",{className:"users-list"},c.users.map((function(e){var t;return i.a.createElement("li",{key:e.id},i.a.createElement(te,{user:e,isFrendshipStatusLoading:null===(t=c.loadingFriendshipStatuses)||void 0===t?void 0:t[e.id],toggleFrienshipStatus:c.toggleFrienshipStatus}))}))),i.a.createElement("div",{className:"users-list__loading"},i.a.createElement(T,null))):i.a.createElement("p",null,"loading...")}))),ae=(n(88),function(){return i.a.createElement(p,null,i.a.createElement(J,null,i.a.createElement("div",{className:"users-page"},i.a.createElement(ne,null))))}),ie=function(){return i.a.createElement(u.a,null,i.a.createElement(s.d,null,i.a.createElement(s.b,{exact:!0,path:"/"},i.a.createElement(V,null)),i.a.createElement(s.b,{path:"/sign-in"},i.a.createElement(Q,null)),i.a.createElement(s.b,{path:"/profile/:userId"},i.a.createElement(Y,null)),i.a.createElement(s.b,{path:"/users"},i.a.createElement(ae,null))))},re=Object(c.c)({initialization:v,signIn:z,profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return{profile:t.profile,profileDefine:!0};default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return Object(m.a)(Object(m.a)({},e),{},{usersList:e.usersList.concat(t.users),usersGot:!0});case"IS_USERS_LOADING":return Object(m.a)(Object(m.a)({},e),{},{isUsersLoading:t.loadingStatus});case"SET_PAGE_NUMBER":return Object(m.a)(Object(m.a)({},e),{},{pageNumber:t.pageNumber});case"ADD_USER_TO_FRIENDS":return Object(m.a)(Object(m.a)({},e),{},{usersList:e.usersList.map((function(e){return e.id===t.userId?(e.followed=!0,e):e})),inLoading:Object(m.a)(Object(m.a)({},e.inLoading),{},{friendshipStatuses:Object(m.a)(Object(m.a)({},e.inLoading.friendshipStatuses),{},Object(K.a)({},t.userId,!1))})});case"REMOVE_USER_FROM_FRIENDS":return Object(m.a)(Object(m.a)({},e),{},{inLoading:Object(m.a)(Object(m.a)({},e.inLoading),{},{friendshipStatuses:Object(m.a)(Object(m.a)({},e.inLoading.friendshipStatuses),{},Object(K.a)({},t.userId,!1))}),usersList:e.usersList.map((function(e){return e.id===t.userId?(e.followed=!1,e):e}))});case"SET_FRIENDSHIP_STATUS_AS_CHANGING":return Object(m.a)(Object(m.a)({},e),{},{inLoading:Object(m.a)(Object(m.a)({},e.inLoading),{},{friendshipStatuses:Object(m.a)(Object(m.a)({},e.inLoading.friendshipStatuses),{},Object(K.a)({},t.userId,!0))})});default:return e}}}),le=n(43),ce=(n(89),Object(c.d)(re,Object(c.a)(le.a)));l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(o.a,{store:ce},i.a.createElement(ie,{dispatch:ce.dispatch}))),document.getElementById("root")),window.store=ce}],[[45,1,2]]]);
//# sourceMappingURL=main.f4b3a571.chunk.js.map